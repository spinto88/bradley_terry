<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Team Scores</title>

  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      max-height: 600px;
      margin: auto;
      padding: 20px;
    }
  </style>
</head>
<body>

<h1>Inferred Team Scores</h1>
<p id="meta"></p>

<div id="chart"></div>

<script>

fetch("data/infered_score.json")
  .then(response => response.json())
  .then(data => {

    // Extraer resultados
    let results = data.results;

    // Ordenar de mayor a menor score
    results.sort((a, b) => b.score - a.score);

    // Separar en arrays
    const teams = results.map(d => d.team);
    const scores = results.map(d => d.score);

    // offset
    const offset = scores[scores.length - 1];
    const scores_rescaled = scores.map(s => s - offset);


    // Mostrar metadata
    if (data.metadata) {
      document.getElementById("meta").innerText =
        "Model: " + data.metadata.model +
        " | Date: " + data.metadata["date_of_creation"];
    }

    const trace = {
      x: teams,
      y: scores_rescaled,
      type: "bar"
    };

const layout = {
  title: "Team Ranking",
  height: 600,

  margin: {
    l: 60,
    r: 30,
    t: 60,
    b: 140   // ðŸ‘ˆ mÃ¡s espacio abajo
  },

  xaxis: {
    title: "Team",
    tickangle: -60,   // ðŸ‘ˆ rota etiquetas
    automargin: true  // ðŸ‘ˆ ajusta automÃ¡ticamente
  },

  yaxis: {
    title: "Score",
    automargin: true
  }
};

	Plotly.newPlot("chart", [trace], layout, { responsive: true });

})
  .catch(error => {
    console.error("Error loading JSON:", error);
  });

</script>

</body>
</html>
